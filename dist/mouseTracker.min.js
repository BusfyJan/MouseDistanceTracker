!function(){function e(e){var t=this;t.delegate=e,t.getDistanceTraveled=function(){return t.delegate.getDistanceTraveled()},t.clearDistanceTraveled=function(){t.delegate.clearDistanceTraveled()}}function t(t){var r=this;return r.config=c,r.actualDistance=0,r.utility=new i,r.init=function(e){if(r.updateConfig(e),r.trackingManager.init(),!0===r.config.remember_user){var t=r.storageManager.getKey("distanceTraveled");!1!==t&&(r.actualDistance=parseFloat(t))}else r.storageManager.deleteKey("distanceTraveled")},r.updateConfig=function(e){for(var t in e)r.config[t]=e[t]},r.getActualDistance=function(){return r.utility.convertPixelsToDistanceUnits(r.actualDistance,r.config.distanceUnits)},r.clearActualDistance=function(){r.actualDistance=0,r.config.remember_user&&r.storageManager.setKey("distanceTraveled",r.actualDistance)},r.trackingManagerDistanceChanged=function(e){r.actualDistance+=e,r.config.remember_user&&r.storageManager.setKey("distanceTraveled",r.actualDistance),r.config.onDistanceChanged!==!1&&r.config.onDistanceChanged(r.utility.convertPixelsToDistanceUnits(r.actualDistance,r.config.distanceUnits),r.utility.convertPixelsToDistanceUnits(e,r.config.distanceUnits))},r.apiDelegate={getDistanceTraveled:r.getActualDistance,clearDistanceTraveled:r.clearActualDistance},r.trackingDelegate={distanceChanged:r.trackingManagerDistanceChanged},r.trackingManager=new a(r.trackingDelegate,r.utility),r.storageManager=new n,r.api=new e(r.apiDelegate),r.init(t),r.api}function a(e,t){var a=this;a.delegate=e,a.utility=t,a.firstMove=!1,a.lastMousePosition={x:0,y:0},a.init=function(){a.bindCallbacks()},a.bindCallbacks=function(){document.addEventListener("mousemove",a.handleMouseMove)},a.handleMouseMove=function(e){var t={x:e.pageX,y:e.pageY};if(!1===a.firstMove)return a.firstMove=!0,void(a.lastMousePosition=t);var n=a.utility.computeDistance(a.lastMousePosition,t);a.lastMousePosition=t,a.delegate.distanceChanged(n)}}function n(){var e=this;e.setKey=function(e,t){window.localStorage[r+e]=t},e.getKey=function(e){return void 0!==window.localStorage[r+e]?window.localStorage[r+e]:!1},e.deleteKey=function(e){delete window.localStorage[r+e]}}function i(){var e=this;e.computeDistance=function(e,t){return Math.sqrt(parseFloat(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))},e.convertPixelsToDistanceUnits=function(e,t){var a=0;switch(t){case"mm":a=2.54/96*10;break;case"inch":a=2.54/96*10/25.4;break;default:throw new Error("Distance units not correct")}return e*a}}var c={remember_user:!1,onDistanceChanged:!1,distanceUnits:"mm"},r="mouseTracker-";window.MouseTracker=t}();